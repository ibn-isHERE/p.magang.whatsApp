<!-- MESSAGE FORM -->
<div id="messageFormContainer" class="form-content active">
    <h2>Buat Jadwal Pesan</h2>
    <form id="reminderForm" enctype="multipart/form-data">
        <div class="recipient-tabs-container">
            <div class="recipient-tabs">
                <button type="button" class="recipient-tab active" data-tab="contacts">
                    <i class="fa-solid fa-user"></i> Kontak Individual
                </button>
                <button type="button" class="recipient-tab" data-tab="groups">
                    <i class="fa-solid fa-users"></i> Grup
                </button>
            </div>

            <div class="recipient-panel active" id="contactsPanel">
                <div class="search-box-wrapper">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" id="contactSearch" placeholder="Cari kontak berdasarkan nama atau nomor..." autocomplete="off" />
                </div>

                <div class="quick-actions">
                    <button type="button" class="quick-action-btn select-all" id="selectAllContactsBtn">
                        <i class="fa-solid fa-check-double"></i> Pilih Semua
                    </button>
                    <button type="button" class="quick-action-btn deselect-all" id="deselectAllContactsBtn">
                        <i class="fa-solid fa-times"></i> Batal Semua
                    </button>
                </div>

                <div id="contactList" class="contact-checklist-box"></div>
                <div class="selection-info" id="contactSelectionInfo">
                    <small>Tidak ada kontak dipilih</small>
                </div>
            </div>

            <div class="recipient-panel" id="groupsPanel">
                <div class="search-box-wrapper">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" id="groupSearch" placeholder="Cari grup..." autocomplete="off" />
                </div>

                <div class="quick-actions">
                    <button type="button" class="quick-action-btn select-all" id="selectAllGroupsBtn">
                        <i class="fa-solid fa-check-double"></i> Pilih Semua
                    </button>
                    <button type="button" class="quick-action-btn deselect-all" id="deselectAllGroupsBtn">
                        <i class="fa-solid fa-times"></i> Batal Semua
                    </button>
                </div>

                <div id="groupSelectionList" class="contact-checklist-box"></div>
                <div id="groupSelectionInfo" class="selection-info">
                    <small>Tidak ada grup dipilih</small>
                </div>
            </div>
        </div>

        <label for="manualNumbers">
            <i class="fa-solid fa-keyboard"></i> Nomor Manual (opsional):
        </label>
        <input type="text" id="manualNumbers" placeholder="Contoh: 08123456789, 08234567890" />
        <small style="display: block; color: #718096; margin-top: 4px; font-size: 12px;">
            Pisahkan dengan koma jika lebih dari satu
        </small>

        <div class="file-upload-section">
            <label>
                <i class="fa-solid fa-paperclip"></i> Lampiran File (Gambar, Video, PDF):
            </label>
            <div class="file-upload-container">
                <input type="file" id="fileUpload" name="fileUpload" accept="image/*,video/*,application/pdf" multiple />
                <span class="file-upload-label" data-input="fileUpload">
                    <i class="fa-solid fa-cloud-upload"></i> Klik untuk memilih file
                </span>
                <div id="customFilePreview"></div>
            </div>
            <button type="button" id="clearAllFilesBtn" style="display: none">
                <i class="fa-solid fa-trash"></i> Hapus Semua File
            </button>
        </div>

        <label for="message">
            <i class="fa-solid fa-comment-dots"></i> Pesan:
        </label>
        <textarea id="message" name="message" placeholder="Tulis pesan Anda di sini..." rows="4"></textarea>

        <label for="datetime">
            <i class="fa-solid fa-clock"></i> Waktu Kirim:
        </label>
        <input type="datetime-local" id="datetime" name="datetime" required />

        <button type="submit">
            <i class="fa-solid fa-paper-plane"></i> Kirim Pesan
        </button>
    </form>
</div>

<!-- MEETING FORM -->
<div id="meetingFormContainer" class="form-content hidden">
    <h2>Buat Jadwal Rapat</h2>
    <form id="addMeetingForm">
        <label for="meetingTitle">
            <i class="fa-solid fa-heading"></i> Judul Rapat:
        </label>
        <input type="text" id="meetingTitle" placeholder="Contoh: Rapat Koordinasi Tim" required />

        <div class="recipient-tabs-container">
            <div class="recipient-tabs">
                <button type="button" class="recipient-tab active" data-tab="meeting-contacts">
                    <i class="fa-solid fa-user"></i> Kontak Individual
                </button>
                <button type="button" class="recipient-tab" data-tab="meeting-groups">
                    <i class="fa-solid fa-users"></i> Grup
                </button>
            </div>

            <div class="recipient-panel active" id="meetingContactsPanel">
                <div class="search-box-wrapper">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" id="meetingContactSearch" placeholder="Cari kontak berdasarkan nama atau nomor..." autocomplete="off" />
                </div>

                <div class="quick-actions">
                    <button type="button" class="quick-action-btn select-all" id="selectAllMeetingContactsBtn">
                        <i class="fa-solid fa-check-double"></i> Pilih Semua
                    </button>
                    <button type="button" class="quick-action-btn deselect-all" id="deselectAllMeetingContactsBtn">
                        <i class="fa-solid fa-times"></i> Batal Semua
                    </button>
                </div>

                <div id="meetingContactList" class="contact-checklist-box"></div>
                <div class="selection-info" id="meetingContactSelectionInfo">
                    <small>Tidak ada kontak dipilih</small>
                </div>
            </div>

            <div class="recipient-panel" id="meetingGroupsPanel">
                <div class="search-box-wrapper">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" id="meetingGroupSearch" placeholder="Cari grup..." autocomplete="off" />
                </div>

                <div class="quick-actions">
                    <button type="button" class="quick-action-btn select-all" id="selectAllMeetingGroupsBtn">
                        <i class="fa-solid fa-check-double"></i> Pilih Semua
                    </button>
                    <button type="button" class="quick-action-btn deselect-all" id="deselectAllMeetingGroupsBtn">
                        <i class="fa-solid fa-times"></i> Batal Semua
                    </button>
                </div>

                <div id="meetingGroupSelectionList" class="contact-checklist-box"></div>
                <div id="meetingGroupSelectionInfo" class="selection-info">
                    <small>Tidak ada grup dipilih</small>
                </div>
            </div>
        </div>

        <label for="meetingNumbers">
            <i class="fa-solid fa-keyboard"></i> Nomor Manual (opsional):
        </label>
        <input type="text" id="meetingNumbers" placeholder="Contoh: 081234567890, 089876543210" />
        <small style="display: block; color: #718096; margin-top: 4px; font-size: 12px;">
            Pisahkan dengan koma jika lebih dari satu
        </small>

        <div class="file-upload-section">
            <label>
                <i class="fa-solid fa-paperclip"></i> Lampiran File untuk Rapat:
            </label>
            <div class="file-upload-container">
                <input type="file" id="meetingFileUpload" name="files" accept="image/*,video/*,application/pdf" multiple />
                <span class="file-upload-label" data-input="meetingFileUpload">
                    <i class="fa-solid fa-cloud-upload"></i> Klik untuk memilih file
                </span>
                <div id="meetingFileNames" class="customFilePreview">Tidak ada file terpilih</div>
            </div>
            <button type="button" id="clearAllMeetingFilesBtn" style="display: none">
                <i class="fa-solid fa-trash"></i> Hapus Semua File
            </button>
        </div>

        <label for="meetingRoom">
            <i class="fa-solid fa-door-open"></i> Ruangan Rapat:
        </label>
        <select id="meetingRoom" required>
            <option value="">-- Pilih Ruangan --</option>
            <option value="Aula Lantai 3">Aula Lantai 3</option>
            <option value="Ruang Sungkai">Ruang Sungkai</option>
            <option value="Ruang distribusi">Ruang Distribusi</option>
            <option value="Ruang Garda SE">Ruang Garda SE</option>
            <option value="Ruang PST">Ruang PST</option>
        </select>

        <div class="form-group">
            <label for="meetingStartTime">
                <i class="fa-solid fa-hourglass-start"></i> Waktu Mulai Rapat:
            </label>
            <input type="datetime-local" id="meetingStartTime" class="form-control" required />
        </div>

        <div class="form-group">
            <label for="meetingEndTime">
                <i class="fa-solid fa-hourglass-end"></i> Waktu Selesai Rapat:
            </label>
            <input type="datetime-local" id="meetingEndTime" class="form-control" required />
        </div>

        <button type="submit">
            <i class="fa-solid fa-calendar-check"></i> Jadwalkan Rapat
        </button>
    </form>
</div>

<div id="editFormContainer" class="form-content hidden"></div>

<!-- CONTACTS FORM -->
<div id="contactsFormContainer" class="form-content hidden">
    <h2>Manajemen Kontak</h2>
    <form id="contact-crud-form">
        <h3>Tambah / Edit Kontak</h3>
        <input type="hidden" id="contact-crud-id" />

        <label for="contact-crud-name">
            <i class="fa-solid fa-user"></i> Nama Kontak:
        </label>
        <input type="text" id="contact-crud-name" class="phone-num-input" placeholder="Nama Kontak" required />

        <label for="contact-crud-number" style="margin-top: 12px">
            <i class="fa-solid fa-phone"></i> Nomor:
        </label>
        <input type="tel" id="contact-crud-number" class="phone-num-input" placeholder="Nomor (contoh: 0812...)" required />

        <label for="contact-crud-instansi" style="margin-top: 12px">
            <i class="fa-solid fa-building"></i> Instansi:
        </label>
        <select id="contact-crud-instansi" required>
            <option value="">-- Pilih Instansi --</option>
        </select>

        <label for="contact-crud-jabatan" style="margin-top: 12px">
            <i class="fa-solid fa-briefcase"></i> Jabatan:
        </label>
        <select id="contact-crud-jabatan" required>
            <option value="">-- Pilih Jabatan --</option>
        </select>

        <label for="contactCrudGroupSearch" style="margin-top: 16px">
            <i class="fa-solid fa-users"></i> Grup (pilih satu atau lebih):
        </label>
        <div class="search-box-wrapper" style="margin-bottom: 8px">
            <i class="fa-solid fa-search"></i>
            <input type="text" id="contactCrudGroupSearch" placeholder="Cari grup..." autocomplete="off" />
        </div>
        <div id="contactCrudGroupList" class="contact-checklist-box" style="max-height: 200px; overflow-y: auto; margin-bottom: 8px">
            <p style="text-align: center; color: #a0aec0">Memuat daftar grup...</p>
        </div>
        <div id="contactCrudGroupInfo" style="margin-bottom: 16px; padding: 8px" class="selection-info">
            <small>Tidak ada grup dipilih</small>
        </div>

        <button type="submit" id="contact-crud-submit">
            <i class="fa-solid fa-plus"></i> Tambah Kontak
        </button>
        <button type="button" id="contact-crud-cancel" style="display: none; background-color: #6c757d; margin-top: 10px">
            <i class="fa-solid fa-times"></i> Batal
        </button>
    </form>

    <form id="import-form" action="/api/import" method="post" enctype="multipart/form-data" style="margin-top: 30px">
        <h3>Import Kontak dari File</h3>

        <div class="import-help-banner">
            <div class="import-help-content">
                <div class="import-help-text">
                    <strong class="import-help-title">
                        <i class="fa-solid fa-info-circle"></i> Format yang Didukung
                    </strong>
                    <small class="import-help-subtitle">
                        CSV (.csv), Excel (.xlsx, .xls), JSON (.json) â€¢ Max 5MB
                    </small>
                </div>
                <button type="button" onclick="window.showImportHelp()" class="import-help-btn">
                    <i class="fa-solid fa-question-circle"></i> Bantuan
                </button>
            </div>
        </div>

        <div class="import-template-buttons">
            <button type="button" id="downloadCSVTemplate" class="import-template-btn csv-btn">
                <i class="fa-solid fa-download"></i> Download Template CSV
            </button>
            <button type="button" id="showExcelGuide" class="import-template-btn excel-btn">
                <i class="fa-solid fa-file-excel"></i> Format Excel
            </button>
        </div>

        <div class="import-file-wrapper">
            <label for="contactFileInput" class="import-file-label">
                <div class="import-file-dropzone">
                    <i class="fa-solid fa-cloud-upload import-file-icon"></i>
                    <strong class="import-file-title">Pilih File untuk Import</strong>
                    <small class="import-file-subtitle">Klik di sini atau drag & drop file</small>
                </div>
            </label>
            <input type="file" id="contactFileInput" name="contactFile" accept=".csv, .json, .xlsx, .xls" required class="import-file-input" />
        </div>

        <button type="submit" class="import-submit-btn">
            <i class="fa-solid fa-file-import"></i> Import Kontak
        </button>
    </form>
</div>

<!-- GROUPS FORM -->
<div id="groupsFormContainer" class="form-content hidden">
    <h2>Manajemen Grup</h2>
    <form id="group-crud-form">
        <h3>Tambah / Edit Grup</h3>
        <input type="hidden" id="group-crud-id" />
        <label for="group-crud-name">Nama Grup:</label>
        <input type="text" id="group-crud-name" placeholder="Contoh: Tim TI, Semua Pegawai" required />

        <label for="groupContactSearch">Cari Kontak:</label>
        <input type="text" id="groupContactSearch" placeholder="Cari kontak..." autocomplete="off" />

        <div class="quick-actions" style="margin-top: 12px; margin-bottom: 12px">
            <button type="button" class="quick-action-btn select-all" id="selectAllGroupContacts">
                <i class="fa-solid fa-check-double"></i> Pilih Semua
            </button>
            <button type="button" class="quick-action-btn deselect-all" id="deselectAllGroupContacts">
                <i class="fa-solid fa-times"></i> Batal Semua
            </button>
        </div>

        <div id="groupContactList" class="contact-checklist-box">
            <p style="text-align: center">Memuat daftar kontak...</p>
        </div>

        <div id="groupMemberCount" style="margin-bottom: 8px; color: #4a5568" class="selection-info">
            <small><strong>Tidak ada kontak dipilih</strong></small>
        </div>

        <input type="hidden" id="group-crud-members" value="" />

        <button type="submit" id="group-crud-submit">Tambah Grup</button>
        <button type="button" id="group-crud-cancel" style="display: none; background-color: #6c757d">Batal</button>
    </form>
</div>

<!-- CHAT SIDEBAR FORM -->
<div id="chatSidebarContainer" class="form-content hidden">
    <div class="chat-tabs">
        <button class="chat-tab-button active" data-status="active">Daftar Percakapan</button>
        <button class="chat-tab-button" data-status="history">History Chat</button>
    </div>

    <div class="chat-search">
        <input type="text" id="chatSearch" placeholder="Cari nomor atau pesan..." />
        <i class="fa-solid fa-search"></i>
    </div>

    <div class="chat-list" id="chatList"></div>
</div>

<!-- SETTINGS FORM -->
<div id="settingsFormContainer" class="form-content hidden">
    <h2>Pengaturan Master Data</h2>

    <div class="settings-tabs" style="margin-bottom: 24px">
        <button class="settings-tab-button active" data-tab="instansi">
            <i class="fa-solid fa-building"></i> Kelola Instansi
        </button>
        <button class="settings-tab-button" data-tab="jabatan">
            <i class="fa-solid fa-briefcase"></i> Kelola Jabatan
        </button>
    </div>

    <!-- INSTANSI PANEL -->
    <div id="instansiPanel" class="settings-panel active">
        <form id="instansi-crud-form">
            <h3>Tambah / Edit Instansi</h3>
            <input type="hidden" id="instansi-crud-id" />

            <label for="instansi-crud-nama">
                <i class="fa-solid fa-building"></i> Nama Instansi:
            </label>
            <input type="text" id="instansi-crud-nama" placeholder="Contoh: Tim Marketing" required />

            <label for="instansi-crud-keterangan" style="margin-top: 12px">
                <i class="fa-solid fa-comment"></i> Keterangan (opsional):
            </label>
            <textarea id="instansi-crud-keterangan" placeholder="Deskripsi instansi..." rows="3"></textarea>

            <button type="submit" id="instansi-crud-submit">
                <i class="fa-solid fa-plus"></i> Tambah Instansi
            </button>
            <button type="button" id="instansi-crud-cancel" style="display: none; background-color: #6c757d; margin-top: 10px">
                <i class="fa-solid fa-times"></i> Batal
            </button>
        </form>
    </div>

    <!-- JABATAN PANEL -->
    <div id="jabatanPanel" class="settings-panel" style="display: none">
        <form id="jabatan-crud-form">
            <h3>Tambah / Edit Jabatan</h3>
            <input type="hidden" id="jabatan-crud-id" />

            <label for="jabatan-crud-nama">
                <i class="fa-solid fa-briefcase"></i> Nama Jabatan:
            </label>
            <input type="text" id="jabatan-crud-nama" placeholder="Contoh: Manager" required />

            <label for="jabatan-crud-keterangan" style="margin-top: 12px">
                <i class="fa-solid fa-comment"></i> Keterangan (opsional):
            </label>
            <textarea id="jabatan-crud-keterangan" placeholder="Deskripsi jabatan..." rows="3"></textarea>

            <button type="submit" id="jabatan-crud-submit">
                <i class="fa-solid fa-plus"></i> Tambah Jabatan
            </button>
            <button type="button" id="jabatan-crud-cancel" style="display: none; background-color: #6c757d; margin-top: 10px">
                <i class="fa-solid fa-times"></i> Batal
            </button>
        </form>
    </div>
</div>

<!-- USER MANAGEMENT FORM -->
<div id="userManagementFormContainer" class="form-content hidden">
    <h2>Manajemen User</h2>
    <form id="user-crud-form">
        <h3>Tambah / Edit User</h3>
        <input type="hidden" id="user-crud-id" />

        <label for="user-crud-name">
            <i class="fa-solid fa-user"></i> Nama Lengkap:
        </label>
        <input type="text" id="user-crud-name" placeholder="Nama Lengkap" required />

        <label for="user-crud-email" style="margin-top: 12px">
            <i class="fa-solid fa-envelope"></i> Email:
        </label>
        <input type="email" id="user-crud-email" placeholder="email@example.com" required />

        <label for="user-crud-password" style="margin-top: 12px">
            <i class="fa-solid fa-lock"></i> Password:
        </label>
        <input type="password" id="user-crud-password" placeholder="Minimal 6 karakter" />
        <small id="user-password-hint" style="display: block; color: #718096; margin-top: 4px; font-size: 12px;"></small>

        <label for="user-crud-role" style="margin-top: 12px">
            <i class="fa-solid fa-user-tag"></i> Role:
        </label>
        <select id="user-crud-role" required>
            <option value="">-- Pilih Role --</option>
            <option value="admin">Admin</option>
            <option value="operator">Operator</option>
        </select>

        <label style="margin-top: 16px; display: flex; align-items: center; gap: 10px; cursor: pointer;">
            <input type="checkbox" id="user-crud-active" checked style="width: auto; cursor: pointer" />
            <span><i class="fa-solid fa-check-circle"></i> User Aktif</span>
        </label>

        <button type="submit" id="user-crud-submit">
            <i class="fa-solid fa-plus"></i> Tambah User
        </button>
        <button type="button" id="user-crud-cancel" style="display: none; background-color: #6c757d; margin-top: 10px">
            <i class="fa-solid fa-times"></i> Batal
        </button>
    </form>
</div>